# ä¼šè¯æ€»ç»“ - Predict Trading Bot

> **ä¸‹æ¬¡å¯¹è¯æ—¶ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹å‘ç»™æˆ‘ï¼Œæˆ‘å°±èƒ½å¿«é€Ÿäº†è§£é¡¹ç›®æƒ…å†µ**

---

## ğŸ“‹ é¡¹ç›®æ¦‚å†µ

**é¡¹ç›®åç§°**: å¤šå¹³å°å¥—åˆ©ç›‘æ§ç³»ç»Ÿ
**å¹³å°**: Polymarket â†” Predict.fun â†” Probable.markets
**é¡¹ç›®è·¯å¾„**: `C:\Users\Administrator\predict-trading-bot`
**GitHub**: https://github.com/knifecat11-design/predict-trading-bot
**éƒ¨ç½²å¹³å°**: Railway (24/7 è¿è¡Œ)

---

## ğŸ”‘ å…³é”®é…ç½®

### Telegram é€šçŸ¥
- **Bot Token**: `8273809449:AAHKO7J_gcNxBpTvc6X_SGWGIZwKKjc4H3Q`
- **Chat ID**: `7944527195`

### Predict.fun
- **API Key**: `1b0c25d4-8ca6-4aa8-8910-cd72b311e4f6`
- **API çŠ¶æ€**: ç”³è¯·ä¸­ï¼Œå½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®

### Polymarket
- **API**: å…¬å¼€ APIï¼Œæ— éœ€è®¤è¯
- **API çŠ¶æ€**: æœªæ¥å…¥çœŸå®æ•°æ®

### Railway ç¯å¢ƒå˜é‡
```
TELEGRAM_BOT_TOKEN=8273809449:AAHKO7J_gcNxBpTvc6X_SGWGIZwKKjc4H3Q
TELEGRAM_CHAT_ID=7944527195
PREDICT_API_KEY=1b0c25d4-8ca6-4aa8-8910-cd72b311e4f6
MIN_ARBITRAGE_THRESHOLD=2.0
SCAN_INTERVAL=10
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å¥—åˆ©ç›‘æ§ (`arbitrage_main.py`)
- **ç­–ç•¥**: Yesä»·æ ¼ + Noä»·æ ¼ < 100% æ—¶å¥—åˆ©
- **åŒå‘æ£€æµ‹**:
  - Polymarket ä¹°Yes + Predict ä¹°No
  - Predict ä¹°Yes + Polymarket ä¹°No
- **é€šçŸ¥æ¡ä»¶**: å¥—åˆ©ç©ºé—´ â‰¥ 2%
- **æ‰«æé—´éš”**: 10 ç§’
- **å†·å´æ—¶é—´**: 5åˆ†é’Ÿ/å¸‚åœº

### 2. è‡ªåŠ¨æŒ‚å• (`main.py`)
- Â±6% èŒƒå›´å†…æŒ‚å•
- ä»·æ ¼æ¥è¿‘æ—¶è‡ªåŠ¨æ’¤å•é‡æŒ‚
- é£é™©æ•å£ç®¡ç†

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
predict-trading-bot/
â”œâ”€â”€ arbitrage_main.py       # å¥—åˆ©ç›‘æ§ä¸»ç¨‹åº âœ… Railway è¿è¡Œä¸­
â”œâ”€â”€ start_arbitrage.py      # å¯åŠ¨åŒ…è£…å™¨ âœ… æ–°å¢
â”œâ”€â”€ main.py                 # è‡ªåŠ¨æŒ‚å•ä¸»ç¨‹åº
â”œâ”€â”€ monitor.py              # æœ¬åœ°ç›‘æ§å·¥å…· âœ… æ–°å¢
â”œâ”€â”€ health_check.py         # å¥åº·æ£€æŸ¥è„šæœ¬ âœ… æ–°å¢
â”œâ”€â”€ test_market_matcher.py  # å¸‚åœºåŒ¹é…æµ‹è¯• âœ… æ–°å¢
â”œâ”€â”€ test_polymarket_api.py  # Polymarket API æµ‹è¯• âœ… æ–°å¢
â”œâ”€â”€ config.yaml             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.yaml.example     # é…ç½®æ–‡ä»¶æ¨¡æ¿ âœ… æ–°å¢ market_match é…ç½®
â”œâ”€â”€ railway.json            # Railway éƒ¨ç½²é…ç½® âœ… å·²æ›´æ–°
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ å¿«é€Ÿéƒ¨ç½².md             # Railway éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ ç›‘æ§å·¥å…·è¯´æ˜.md         # ç›‘æ§å·¥å…·æ–‡æ¡£ âœ… æ–°å¢
â”œâ”€â”€ ä¼šè¯æ€»ç»“.md             # æœ¬æ–‡ä»¶
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ trading_arbitrage.log # è¿è¡Œæ—¥å¿—
â””â”€â”€ src/
    â”œâ”€â”€ api_client.py       # Predict API å®¢æˆ·ç«¯
    â”œâ”€â”€ polymarket_api.py   # Polymarket API å®¢æˆ·ç«¯ âœ… å·²å¢å¼º
    â”œâ”€â”€ probable_api.py     # Probable.markets API å®¢æˆ·ç«¯
    â”œâ”€â”€ market_matcher.py   # æ™ºèƒ½å¸‚åœºåŒ¹é…å™¨ âœ… æ–°å¢
    â”œâ”€â”€ arbitrage_monitor.py# å¥—åˆ©ç›‘æ§é€»è¾‘ âœ… å·²ä¼˜åŒ–
    â”œâ”€â”€ strategy.py         # æŒ‚å•ç­–ç•¥
    â”œâ”€â”€ risk_manager.py     # é£é™©ç®¡ç†
    â”œâ”€â”€ notifier.py         # Telegram é€šçŸ¥ âœ… å·²ä¼˜åŒ–
    â””â”€â”€ config_helper.py    # é…ç½®è¾…åŠ©
```

---

## ğŸš€ å½“å‰çŠ¶æ€

- âœ… Railway éƒ¨ç½²æˆåŠŸ
- âœ… Telegram é€šçŸ¥æ­£å¸¸
- âœ… é”™è¯¯å¤„ç†å·²å¢å¼º
- âœ… æ·»åŠ å¿ƒè·³å’Œç›‘æ§
- â³ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼ˆç­‰å¾…çœŸå® APIï¼‰

---

## ğŸ”§ æœ€è¿‘ä¿®å¤ (2026-02-05)

### 1. æµ‹è¯•è„šæœ¬åŠŸèƒ½ (æœ€æ–°)
- **æ–°å¢ `test_market_matcher.py`**: å¸‚åœºåŒ¹é…åŠŸèƒ½æµ‹è¯•è„šæœ¬
  - å…³é”®è¯æå–æµ‹è¯•ï¼ˆå¹´ä»½ã€ä»·æ ¼ã€å®ä½“ï¼‰
  - ç›¸ä¼¼åº¦è®¡ç®—æµ‹è¯•ï¼ˆé«˜/ä½ç›¸ä¼¼åº¦å¸‚åœºï¼‰
  - è·¨å¹³å°å¸‚åœºåŒ¹é…æµ‹è¯•
  - è¾¹ç•Œæƒ…å†µæµ‹è¯•ï¼ˆç©ºå­—ç¬¦ä¸²ã€å•å­—ç¬¦ã€ä¸­æ–‡ç­‰ï¼‰
- **æ–°å¢ `test_polymarket_api.py`**: Polymarket API å¢å¼ºåŠŸèƒ½æµ‹è¯•
  - åŸºæœ¬åŠŸèƒ½æµ‹è¯•ï¼ˆå¸‚åœºåˆ—è¡¨è·å–ï¼‰
  - çƒ­é—¨å¸‚åœºç­›é€‰æµ‹è¯•
  - å¸‚åœºæœç´¢æµ‹è¯•
  - ä»·æ ¼è·å–æµ‹è¯•
  - å¸‚åœºè¯¦ç»†ä¿¡æ¯æµ‹è¯•
  - ç¼“å­˜åŠŸèƒ½æµ‹è¯•

### 2. Polymarket API å¢å¼º
- **çƒ­é—¨å¸‚åœºç­›é€‰**: `get_popular_markets(limit, min_volume)`
  - æŒ‰æˆäº¤é‡é™åºæ’åº
  - æ”¯æŒæœ€å°æˆäº¤é‡é˜ˆå€¼è¿‡æ»¤
- **æ ‡ç­¾è¿‡æ»¤**: `get_markets_by_tag(tag, limit)`
  - æŒ‰æ ‡ç­¾ç­›é€‰å¸‚åœºï¼ˆpolitics, crypto, sports ç­‰ï¼‰
- **å³å°†åˆ°æœŸå¸‚åœº**: `get_markets_closing_soon(hours, limit)`
  - è·å–æŒ‡å®šå°æ—¶å†…åˆ°æœŸçš„å¸‚åœº
- **ç²¾ç¡®ä»·æ ¼è·å–**: `get_market_price(token_id, side)`
  - ä½¿ç”¨ Gamma API çš„ `/price` ç«¯ç‚¹
  - 10 ç§’ä»·æ ¼ç¼“å­˜
  - æ”¯æŒ Yes/No ä»·æ ¼è·å– `get_token_prices(condition_id)`
- **å¢å¼ºçš„è®¢å•ç°¿**: `get_order_book(market_id)`
  - å°è¯•ä½¿ç”¨ CLOB API è·å–çœŸå®è®¢å•ç°¿
  - å›é€€åˆ°ä»·æ ¼ API ä¼°ç®—
  - åŒ…å«ä¹°å–ä»·å’Œè®¢å•æ·±åº¦
- **ç¼“å­˜ä¼˜åŒ–**: 30 ç§’å¸‚åœºåˆ—è¡¨ç¼“å­˜ï¼Œ10 ç§’ä»·æ ¼ç¼“å­˜
- **æ–°å¢æ•°æ®ç±»**: `PolymarketOrderBook` åŒ…å«ä¹°å–ä»·å’Œæ·±åº¦

### 3. æ™ºèƒ½å¸‚åœºåŒ¹é…åŠŸèƒ½
- **æ–°å¢ `src/market_matcher.py`**: å®ç°å…³é”®è¯æ™ºèƒ½åŒ¹é…ç®—æ³•
  - è‡ªåŠ¨æå–å…³é”®è¯ï¼ˆå¹´ä»½ã€ä»·æ ¼ã€äººåã€å®ä½“ï¼‰
  - è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦ï¼ˆå®ä½“åŒ¹é… 40% + æ•°å­—åŒ¹é… 30% + è¯æ±‡åŒ¹é… 20% + å­—ç¬¦ä¸²ç›¸ä¼¼åº¦ 10%ï¼‰
  - æ”¯æŒåœç”¨è¯è¿‡æ»¤å’Œæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…
  - ç¼“å­˜æœºåˆ¶ï¼ˆé»˜è®¤ 30 åˆ†é’Ÿï¼‰å‡å°‘ API è°ƒç”¨
- **æ›´æ–° `arbitrage_monitor.py`**: é›†æˆæ™ºèƒ½å¸‚åœºåŒ¹é…å™¨
  - è‡ªåŠ¨æ„å»ºè·¨å¹³å°å¸‚åœºæ˜ å°„ï¼ˆPolymarket â†” Predict.fun â†” Probable.marketsï¼‰
  - ä½¿ç”¨åŒ¹é…çš„å¸‚åœº ID è¿›è¡Œå¥—åˆ©æ‰«æ
  - æ˜¾ç¤ºåŒ¹é…ç½®ä¿¡åº¦
  - ç§»é™¤æ—§çš„ `_scan_probable_markets` æ–¹æ³•ï¼Œç»Ÿä¸€åˆ°ä¸»æ‰«æå¾ªç¯
- **æ›´æ–° API å®¢æˆ·ç«¯**:
  - `api_client.py`: `get_market_data(market_id)` æ¥å—å¯é€‰å¸‚åœº ID å‚æ•°
  - `probable_api.py`: åŒæ ·çš„æ”¹è¿›
- **é…ç½®æ–‡ä»¶å¢å¼º**: `config.yaml.example` æ–°å¢ `market_match` é…ç½®åŒº
  - `min_confidence`: æœ€å°åŒ¹é…ç½®ä¿¡åº¦ï¼ˆé»˜è®¤ 0.4ï¼‰
  - `max_matches`: æ¯ä¸ªå¸‚åœºæœ€å¤§åŒ¹é…å€™é€‰æ•°
  - `cache_minutes`: åŒ¹é…ç¼“å­˜æ—¶é—´
  - `manual_mappings`: æ‰‹åŠ¨æ˜ å°„è¦†ç›–é€‰é¡¹

### 2. é¡¹ç›®ç»“æ„ä¼˜åŒ–
- **æ–‡æ¡£é‡ç»„**: ç§»åŠ¨æ–‡æ¡£åˆ° `docs/` ç›®å½•
  - `docs/APIç”³è¯·æŒ‡å—.md` - API è®¿é—®ç”³è¯·æŒ‡å—
  - `docs/RAILWAY_DEPLOY.md` - Railway éƒ¨ç½²æŒ‡å—
  - `docs/å¿«é€Ÿéƒ¨ç½².md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—
  - `docs/PROJECT_STRUCTURE.md` - é¡¹ç›®ç»“æ„è¯´æ˜
- **æ¸…ç†å†—ä½™æ–‡ä»¶**: åˆ é™¤æµ‹è¯•æ–‡ä»¶ï¼ˆtest_*.py, simple_test.pyï¼‰
- **å®‰å…¨æ”¹è¿›**:
  - åˆ›å»º `config.yaml.example` æ¨¡æ¿
  - æ›´æ–° `.gitignore` æ’é™¤ `config.yaml`
  - æ›´æ–° `.env.example` åŒ…å«æ‰€æœ‰ç¯å¢ƒå˜é‡
- **README é‡å†™**: æ›´ä¸“ä¸šã€ç®€æ´ï¼Œæ·»åŠ  badges å’Œæ›´å¥½çš„ç»“æ„
- **ä¿ç•™æœ¬åœ°è„šæœ¬**: `start_monitoring.bat/vbs` ä¿ç•™ä½†ä¸æäº¤åˆ° Git
- æäº¤: `84304c8`, `4b91faf`

### 2. æ··åˆæ¨¡å¼åŠŸèƒ½
- **æ–°å¢**: æ”¯æŒæ··åˆæ¨¡å¼ - Polymarket çœŸå®æ•°æ® + Predict.fun æ¨¡æ‹Ÿæ•°æ®
- **é»˜è®¤å¯ç”¨**: `USE_HYBRID_MODE=true`ï¼ˆæ— éœ€ API Key å³å¯å¼€å§‹ç›‘æ§ï¼‰
- **ç¯å¢ƒå˜é‡**:
  - `USE_HYBRID_MODE=true` - Polymarket çœŸå® + Predict.fun æ¨¡æ‹Ÿï¼ˆé»˜è®¤ï¼‰
  - `USE_REAL_API=true` - å®Œå…¨çœŸå®æ¨¡å¼ï¼ˆéœ€è¦ä¸¤ä¸ª APIï¼‰
  - `USE_HYBRID_MODE=false` - å®Œå…¨æ¨¡æ‹Ÿæ¨¡å¼
- æäº¤: `2363b5a`

### 2. Logger åˆå§‹åŒ–é¡ºåºä¿®å¤
- **é—®é¢˜**: ä»£ç åœ¨ä½¿ç”¨ `logger` å‰æœªåˆå§‹åŒ–ï¼Œå¯¼è‡´ `UnboundLocalError`
- **ä¿®å¤**: å°† `setup_logging()` è°ƒç”¨ç§»åˆ° `logger` ä½¿ç”¨ä¹‹å‰
- æäº¤: `74afbee`

### 2. API ç«¯ç‚¹ä¿®å¤
- **Polymarket**: ä¿®å¤ base URL ä» `api.polymarket.com` æ”¹ä¸º `gamma-api.polymarket.com`
- **Predict.fun**: æ·»åŠ  `/v1` API ç‰ˆæœ¬å‰ç¼€åˆ°æ‰€æœ‰ç«¯ç‚¹
- **åˆ›å»º API ç”³è¯·æŒ‡å—**: è¯¦ç»†è¯´æ˜å¦‚ä½•ç”³è¯·ä¸¤ä¸ªå¹³å°çš„ API è®¿é—®æƒé™
- æäº¤: `26a7cb1`

### 2. Railway å¥åº·æ£€æŸ¥ä¿®å¤
- **ç¦ç”¨ HTTP å¥åº·æ£€æŸ¥**: åå°ç›‘æ§ç¨‹åºä¸æä¾› HTTP æœåŠ¡å™¨ï¼Œè®¾ç½® `healthcheckPath: null`
- **è§£å†³åå¤å´©æºƒé—®é¢˜**: Railway ä¹‹å‰å›  `/` è·¯å¾„æ— å“åº”è€Œåˆ¤å®šæœåŠ¡ä¸å¥åº·
- æäº¤: `0c06bb7`

### 2. å…³é”® Bug ä¿®å¤
- **ä¿®å¤ `arbitrage_main.py` ç¼ºå°‘ `requests` å¯¼å…¥**: æ·»åŠ ç¼ºå¤±çš„ `import requests`ï¼Œé˜²æ­¢ç½‘ç»œé”™è¯¯å¤„ç†æ—¶å´©æºƒ
- **ç»Ÿä¸€å¯åŠ¨å‘½ä»¤**: ä¿®å¤ `nixpacks.toml` ä¸ `railway.json` å¯åŠ¨å‘½ä»¤ä¸ä¸€è‡´é—®é¢˜
- æäº¤: `a616032`

### 2. Telegram é€šçŸ¥ä¿®å¤
- ä¿®å¤ HTML ç‰¹æ®Šå­—ç¬¦æœªè½¬ä¹‰å¯¼è‡´æ¨é€å¤±è´¥çš„é—®é¢˜
- å¢åŠ è¶…æ—¶æ—¶é—´åˆ° 15 ç§’
- æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ï¼ˆé”™è¯¯ç ã€æè¿°ï¼‰

### 3. é”™è¯¯å¤„ç†å¢å¼º
- åˆ†ç±»å¤„ç†ä¸åŒç±»å‹å¼‚å¸¸ï¼ˆç½‘ç»œã€ç±»å‹ã€å±æ€§ç­‰ï¼‰
- æ·»åŠ è¿ç»­é”™è¯¯è®¡æ•°å’Œè‡ªåŠ¨é€€é¿æœºåˆ¶
- å®Œæ•´çš„å¼‚å¸¸å †æ ˆè®°å½•

### 4. ç›‘æ§å’Œå¥åº·æ£€æŸ¥
- æ·»åŠ æ¯å°æ—¶å¿ƒè·³æ—¥å¿—
- å®šæœŸè¾“å‡ºç»Ÿè®¡ä¿¡æ¯
- æ”¹è¿› Railway ç¯å¢ƒæ£€æµ‹ï¼ˆ`RAILWAY_SERVICE_NAME`ï¼‰

### 5. æ–°å¢å·¥å…·è„šæœ¬
- `start_arbitrage.py`: å¯åŠ¨åŒ…è£…å™¨ï¼Œæ•è·æ‰€æœ‰æœªå¤„ç†å¼‚å¸¸
- `monitor.py`: æœ¬åœ°ç›‘æ§å·¥å…·ï¼ŒæŸ¥çœ‹ç»Ÿè®¡ã€æ—¥å¿—ã€é”™è¯¯
- `health_check.py`: Railway å¥åº·æ£€æŸ¥è„šæœ¬
- `ç›‘æ§å·¥å…·è¯´æ˜.md`: å·¥å…·ä½¿ç”¨æ–‡æ¡£

### 6. æ•°æ®éªŒè¯
- åœ¨ `arbitrage_monitor.py` ä¸­æ·»åŠ å±æ€§å­˜åœ¨æ€§æ£€æŸ¥
- é¿å… None å€¼å¯¼è‡´çš„ AttributeError

---

## ğŸ“ å¾…åŠäº‹é¡¹

- [x] æ™ºèƒ½å¸‚åœºåŒ¹é…åŠŸèƒ½ âœ… å·²å®Œæˆ
- [ ] è·å– Predict.fun çœŸå® APIï¼ˆç­‰å¾… Discord æ‰¹å‡†ï¼‰
- [ ] è·å– Probable.markets çœŸå® API
- [ ] å®ç°è‡ªåŠ¨æŒ‚å•åŠŸèƒ½éƒ¨ç½²
- [ ] æ·»åŠ æ›´å¤šå¸‚åœºç›‘æ§ç­–ç•¥ï¼ˆæ³¢åŠ¨ç‡ã€æˆäº¤é‡ç­‰ï¼‰

---

## ğŸ’¡ ä¸‹æ¬¡å¯¹è¯æç¤º

å¦‚æœéœ€è¦ç»§ç»­å¼€å‘ï¼Œå¯ä»¥ï¼š
1. **å‘é€è¿™ä¸ªæ–‡ä»¶å†…å®¹**ç»™æˆ‘
2. å‘Šè¯‰æˆ‘ä½ æƒ³åšä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼š"æ¥å…¥çœŸå® API"ã€"ä¼˜åŒ–ä»£ç "ç­‰ï¼‰
3. æˆ‘ä¼šå¿«é€Ÿäº†è§£é¡¹ç›®å¹¶ç»§ç»­å¸®åŠ©ä½ 

---

## ğŸ” æ•…éšœæ’æŸ¥

### ç¨‹åºé¢‘ç¹é‡å¯
- æ£€æŸ¥ Railway æ—¥å¿—
- ä½¿ç”¨ `python monitor.py errors` æŸ¥çœ‹é”™è¯¯
- éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

### Telegram æ¨é€å¤±è´¥
- éªŒè¯ Bot Token å’Œ Chat ID
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹å…·ä½“é”™è¯¯æè¿°

---

**åˆ›å»ºæ—¥æœŸ**: 2026-02-04
**æœ€åæ›´æ–°**: 2026-02-05 (Polymarket API å¢å¼º + æµ‹è¯•è„šæœ¬)
